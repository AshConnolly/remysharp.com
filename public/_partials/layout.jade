- function repeat(str, num) { return new Array( num + 1 ).join( str ); }

prefix = repeat('.', current.path.length).split('..').join('../')

doctype
html#remysharp-com
head
  meta(charset="utf-8")
  meta(http-equiv="X-UA-Compatible" content="IE=edge")
  title= title || site_title
  meta(name="description",content="#{site_description}")
  meta(name="HandheldFriendly" content="True")
  meta(name="viewport" content="width=device-width, initial-scale=1.0")

  link(rel="shortcut icon" href="/favicon.ico")
  link(rel="stylesheet" type="text/css" href="/css/screen.css")
  link(rel="stylesheet" type="text/css" href="/css/github.css")

  script.
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', '#{analytics}', 'auto');
    ga('send', 'pageview');
body(id="#{current.path.join('-')}-page")
  != partial(prefix + '/js/moment')

  block content

  footer.site-footer.clearfix.flex
    .flex-item.archives
      h2 Archives
      ul
        li: a(href="/archive") All years
        - var thisyear = moment().format('YYYY') * 1
        while thisyear >= 2006
          li: a(href="/#{ thisyear }") #{ thisyear-- }
    .flex-item.links
      h2 Links
      ul
        li: a(href="/about") About Remy
        li: a(target="_blank" href="https://github.com/remy") On GitHub
        li: a(target="_blank" href="https://twitter.com/rem") On Twitter
        li: a(target="_blank" href="http://lanyrd.com/rem") Speaking
    .flex-item.license
      h2 License
      p.vcard All content by <a class="url fn" href="#{url}">Remy Sharp</a> and under <a href="http://creativecommons.org/licenses/by-nc-sa/2.0/uk/">creative commons</a> and code under <a href="http://rem.mit-license.org">MIT license</a>.
      :markdown
        All code and content for this blog is available as [open source on GitHub](https://github.com/remy/remysharp.com).

  script(src="http://code.jquery.com/jquery-1.11.1.min.js")
  script.
    window.jQuery || document.write('<script src="js/jquery.min.js"><\/script>')
  script(src="/js/jquery.fitvids.js")
  script(src="/js/highlight.min.js")
  script(src="/js/index.js")

  //
    |  
    |  
    |  Carved up by hand using Harp and a shit load of hacking.
    |  
    |  Also, this:
    |  
    |  
    |  
    |                        \_            /;              _.._
    |                        `\~--.._     //'            ,(+=\\\\
    |                         `//////\  \\/;'             /~ (\\\\
    |                           ~/////\~\`)'             /;   ))))
    |                               `~'  |              ((`~/((((\
    |                               ;'_\'\             /'))   )))))
    |                              /~/ '" "'     _.  /'/\_ /^\`((( \
    |                             `\/'       _.-~/--/ (  =(   | ,  |
    |                                     _/~\_)_}___/^\/~`\.__\|==|
    |                                    /uUUU)        )        |  |
    |                                   (   / |      _-=o|\__ /'/~ \
    |                                   ' /'  |     /(((((\`\(  |~\/
    |                                   /'    |   /' )))))"`\`\|/_/---.._,$$,
    |                             .,ssS$$$Sss|._/_..-((('    )\)>>>      ~\$
    |                          ,sS$$$$$$$$$$$|$$$$$$$  |/    //'~`o        `\
    |                        ,$$$$$$$$$$$$$$|$$S$$$$'  (    /                \
    |                      ,$$$$$$$$$$$$S$$|$$$$$$$'   |   /              ,s$$$
    |                    s$$$$$S$$$$$$$$$S|$$$$$$$$    |  /              $$$$$$
    |                  _~,$S""''     ``"S|$$S$$$$$"    (_,`\,          ,$$$$$$$;
    |                /~ ,"'             / 'S$$$$$"      \_./|        s$$$$$$$$$$
    |             (~'      _,  \==~~)  /     """         \  |       $$$$$$$$$$$$
    |              (0\   /0/     \-' /'                   \ |  |  ,$$$$$$$$$$$$$,
    |              `/'  '         _-~                     |= \_-\ $$$$$$$$$$$$$$s
    |              (~~~)      _.-~_-   \             \  ,s|= |   `"$$$$$$$$$$$$$$$
    |             ( `-'  )/>-~  _/-__   |            |,$$$|_/,      `"$$$$$$$$$$$$
    |             /V^^^^V~/' _/~/~~  ~~-|            |$$$$$$$$         "$$$$$$$$$$,
    |            /  (^^^^),/' /'        )           /S$$$$$$$;         ,$$$$$$$$$$$,
    |          ,$$_  `~~~'.,/'         /     _-ss, /(/-(/-(/'        ,s$$$$$$$$$$$$$
    |        ,s$$$$$ssSS$$$'         ,$'.s$$$$$$$$'                  (/-(/-(/-(/-(/'
    |       S$$$$$$$$$$$$$$        ,$$$$$$$$$$$$$'
    |      (/-(/-(/-(/-(/'      _s$$$$$$$$$$$$$$
    |                          (/-(/-(/-(/-(/-'
    |  
    |  
    |  
    |      – Remy
    |  
    |  
  if environment == "production"
    // Env: production - static files
  else
    // Env: development - render on demand
